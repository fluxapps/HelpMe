il.HelpMe={IDS:["ilMMSearch","userlog","mm_lang_sel"],GET_ISSUE_TYPES_OF_PROJECT_URL:"",GET_SHOW_TICKETS_OF_PROJECT_URL:"",MODAL_TEMPLATE:"",SUPPORT_BUTTON_TEMPLATE:"",autoOpen:!1,button:null,li:null,modal:null,requestAgain:!0,screenshots:null,cancel:function(){return this.modal.modal("hide"),!1},click:function(a=null){null!==a&&a.preventDefault();var b=this.button.attr("href");$.get(b,this.show.bind(this))},hide:function(){this.modal.find(".modal-body").html(""),null!==this.screenshots&&(il.ScreenshotsInputGUI.removeInstance(this.screenshots),this.screenshots=null)},init:function(){$(document).ready(function(){this.initButton(),this.initModal(),this.autoOpen&&this.click()}.bind(this))},initButton:function(){this.li=$(this.SUPPORT_BUTTON_TEMPLATE),this.button=this.li.hasClass("dropdown")?$("li > a:first",this.li):$("> a:first",this.li),this.button.click(this.click.bind(this));var a=this.IDS.every(function(a){var b=document.getElementById(a);return!(null!==b)||("li"!==b.tagName.toLowerCase()&&(b=b.parentElement),$(b).before(this.li),!1)},this);a&&$("#ilTopBarNav").append(this.li)},initModal:function(){this.modal=$(this.MODAL_TEMPLATE),$("body").append(this.modal),this.modal.on("hide.bs.modal",this.hide.bind(this))},projectChangeIssueTypes:function(){var a=$("#issue_type");a.children().first().nextAll().remove(),a.prop("disabled",!0);var b=$("#project"),c=b.val(),d=this.GET_ISSUE_TYPES_OF_PROJECT_URL;d+="&project_url_key="+c,$.get(d,this.projectChangeIssueTypesShow.bind(this))},projectChangeIssueTypesShow:function(a){var b=$("#issue_type");b.replaceWith(a)},projectChangeShowTickets:function(){var a=$("#project");a.next().remove();var b=a.val(),c=this.GET_SHOW_TICKETS_OF_PROJECT_URL;c+="&project_url_key="+b,$.get(c,this.projectChangeShowTicketsShow.bind(this))},projectChangeShowTicketsShow:function(a){var b=$("#project");b.after(a)},show:function(a){if(-1===a.indexOf("form_helpme_form")&&this.requestAgain)return this.requestAgain=!1,void this.click();if(this.requestAgain=!1,this.modal.find(".modal-body").html(a),-1!==a.indexOf("form_helpme_form")){var b=[];null!==this.screenshots&&(b=this.screenshots.screenshots),this.screenshots=il.ScreenshotsInputGUI.lastInstance(),void 0===this.screenshots?this.screenshots=null:(this.screenshots.screenshots=b,this.screenshots.modal=this.modal,this.screenshots.updateScreenshots(),this.screenshots.submitButtonID="helpme_submit",this.screenshots.submitFunction=this.show.bind(this));var c=$("#helpme_cancel"),d=$("#project");c.click(this.cancel.bind(this)),d.change(this.projectChangeIssueTypes.bind(this)),$("input[type=\"hidden\"][name=\"issue_type\"]").remove(),0<d.parent(".project_select_input").length&&d.change(this.projectChangeShowTickets.bind(this))}this.modal.modal("show")}};