il.HelpMe={IDS:["ilMMSearch","userlog","mm_lang_sel"],GET_ISSUE_TYPES_OF_PROJECT_URL:"",GET_SHOW_TICKETS_OF_PROJECT_URL:"",MODAL_TEMPLATE:"",SUPPORT_BUTTON_TEMPLATE:"",autoOpen:!1,button:null,li:null,modal:null,requestAgain:!0,screenshots:null,cancel:function(){return this.modal.modal("hide"),!1},click:function(a=null){null!==a&&a.preventDefault();var b=this.button.attr("href");$.get(b,this.show.bind(this))},hide:function(){this.modal.find(".modal-body").html(""),null!==this.screenshots&&(il.ScreenshotsInputGUI.removeInstance(this.screenshots),this.screenshots=null)},init:function(){$(document).ready(function(){this.initButton(),this.initModal(),this.autoOpen&&this.click()}.bind(this))},initButton:function(){this.li=$(this.SUPPORT_BUTTON_TEMPLATE),this.button=this.li.hasClass("dropdown")?$("li > a:first",this.li):$("> a:first",this.li),this.button.click(this.click.bind(this));var a=this.IDS.every(function(a){var b=document.getElementById(a);return!(null!==b)||("li"!==b.tagName.toLowerCase()&&(b=b.parentElement),$(b).before(this.li),!1)},this);a&&$("#ilTopBarNav").append(this.li)},initModal:function(){this.modal=$(this.MODAL_TEMPLATE),$("body").append(this.modal),this.modal.on("hide.bs.modal",this.hide.bind(this))},projectChangeIssueTypes:function(){var a=$("select[id^=\"field_issuetypefield_\"]",this.modal);a.prop("disabled",!0);var b=$("select[id^=\"field_projectfield_\"]",this.modal),c=b.val(),d=this.GET_ISSUE_TYPES_OF_PROJECT_URL;d+="&project_url_key="+c,$.get(d,this.projectChangeIssueTypesShow.bind(this))},projectChangeIssueTypesShow:function(a){var b=$("select[id^=\"field_issuetypefield_\"]",this.modal);b.replaceWith(a),$("input[type=\"hidden\"][name^=\"field_issuetypefield_\"]",this.modal).remove()},projectChangeShowTickets:function(){var a=$("select[id^=\"field_projectfield_\"]",this.modal);a.next().remove();var b=a.val(),c=this.GET_SHOW_TICKETS_OF_PROJECT_URL;c+="&project_url_key="+b,$.get(c,this.projectChangeShowTicketsShow.bind(this))},projectChangeShowTicketsShow:function(a){var b=$("select[id^=\"field_projectfield_\"]",this.modal);b.after(a)},show:function(a){if(-1===a.indexOf("form_helpme_form")&&this.requestAgain)return this.requestAgain=!1,void this.click();if(this.requestAgain=!1,this.modal.find(".modal-body").html(a),-1!==a.indexOf("form_helpme_form")){var b=[];null!==this.screenshots&&(b=this.screenshots.screenshots),this.screenshots=il.ScreenshotsInputGUI.lastInstance(),void 0===this.screenshots?this.screenshots=null:(this.screenshots.screenshots=b,this.screenshots.modal=this.modal,this.screenshots.updateScreenshots());var c=$("#form_helpme_form");c.submit(this.submit.bind(this));var d=$("#helpme_cancel");d.click(this.cancel.bind(this));var e=$("select[id^=\"field_projectfield_\"]",this.modal);1===e.length&&(1===$("select[id^=\"field_issuetypefield_\"]",this.modal).length&&e.change(this.projectChangeIssueTypes.bind(this)),1===e.parent(".project_select_input").length&&e.change(this.projectChangeShowTickets.bind(this))),$("input[type=\"hidden\"][name^=\"field_projectfield_\"],input[type=\"hidden\"][name^=\"field_issuetypefield_\"]",this.modal).remove()}this.modal.modal("show")},submit:function(){var a=$("#form_helpme_form"),b=$("#helpme_submit"),c=a.attr("action"),d=new FormData(a[0]);return d.append(b.prop("name"),b.val()),null!==this.screenshots&&this.screenshots.addScreenshotsToUpload(d),$.ajax({type:"post",url:c,contentType:!1,processData:!1,data:d,success:this.show.bind(this)}),!1}};
